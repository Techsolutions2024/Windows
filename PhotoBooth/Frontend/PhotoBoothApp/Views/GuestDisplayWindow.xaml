<Window x:Class="PhotoBooth.Views.GuestDisplayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="PhotoBooth - Touch to Start" 
        Height="1080" Width="1920"
        WindowStyle="None"
        WindowState="Maximized"
        Background="Black"
        Cursor="None">
    
    <Grid x:Name="MainGrid" MouseDown="MainGrid_MouseDown">
        <!-- Attract Screen -->
        <Grid x:Name="AttractScreen" Visibility="{Binding AttractScreenVisible}">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#667eea" Offset="0"/>
                    <GradientStop Color="#764ba2" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
            
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="ðŸ“·" 
                         FontSize="150" 
                         HorizontalAlignment="Center" 
                         Margin="0,0,0,30"/>
                
                <TextBlock Text="PhotoBooth" 
                         FontSize="120" 
                         FontWeight="Bold" 
                         Foreground="White" 
                         HorizontalAlignment="Center"
                         Margin="0,0,0,20"/>
                
                <TextBlock Text="Touch Anywhere to Start" 
                         FontSize="60" 
                         Foreground="White" 
                         HorizontalAlignment="Center"
                         Opacity="0.8">
                    <TextBlock.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                                   From="0.3" To="1.0" Duration="0:0:1.5"
                                                   AutoReverse="True"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </TextBlock.Triggers>
                </TextBlock>

                <TextBlock Text="{Binding EventName}" 
                         FontSize="40" 
                         Foreground="White" 
                         HorizontalAlignment="Center"
                         Margin="0,50,0,0"
                         Opacity="0.7"/>
            </StackPanel>
        </Grid>

        <!-- Countdown Screen -->
        <Grid x:Name="CountdownScreen" 
              Background="#80000000"
              Visibility="{Binding CountdownVisible}">
            <Viewbox>
                <TextBlock Text="{Binding CountdownValue}" 
                         FontSize="500" 
                         FontWeight="Bold" 
                         Foreground="White" 
                         HorizontalAlignment="Center" 
                         VerticalAlignment="Center">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="Black" 
                                        BlurRadius="30" 
                                        ShadowDepth="0" 
                                        Opacity="0.8"/>
                    </TextBlock.Effect>
                </TextBlock>
            </Viewbox>
        </Grid>

        <!-- Live View Screen -->
        <Grid x:Name="LiveViewScreen" Visibility="{Binding LiveViewVisible}">
            <Image Source="{Binding LiveViewFrame}" 
                   Stretch="UniformToFill"/>
            
            <!-- Frame Overlay -->
            <Image Source="{Binding TemplateOverlay}" 
                   Stretch="Fill"
                   Visibility="{Binding TemplateVisible}"/>
        </Grid>

        <!-- Preview Screen -->
        <Grid x:Name="PreviewScreen" 
              Background="Black"
              Visibility="{Binding PreviewVisible}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Photo Preview -->
            <Image Grid.Row="0" 
                   Source="{Binding PreviewImage}" 
                   Stretch="Uniform"
                   Margin="50"/>

            <!-- Action Buttons -->
            <StackPanel Grid.Row="1" 
                       Orientation="Horizontal" 
                       HorizontalAlignment="Center"
                       Margin="0,0,0,50">
                <Button Content="âœ“ Print" 
                      FontSize="40" 
                      FontWeight="Bold"
                      Width="300" 
                      Height="100"
                      Background="#28A745"
                      Foreground="White"
                      BorderThickness="0"
                      Margin="20"
                      Command="{Binding PrintCommand}"
                      Visibility="{Binding PrintEnabled}">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="10"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <Button Content="ðŸ“§ Share" 
                      FontSize="40" 
                      FontWeight="Bold"
                      Width="300" 
                      Height="100"
                      Background="#007ACC"
                      Foreground="White"
                      BorderThickness="0"
                      Margin="20"
                      Command="{Binding ShareCommand}"
                      Visibility="{Binding ShareEnabled}">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="10"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <Button Content="â†» Retake" 
                      FontSize="40" 
                      FontWeight="Bold"
                      Width="300" 
                      Height="100"
                      Background="#FFC107"
                      Foreground="Black"
                      BorderThickness="0"
                      Margin="20"
                      Command="{Binding RetakeCommand}">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="10"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <Button Content="âœ• Done" 
                      FontSize="40" 
                      FontWeight="Bold"
                      Width="300" 
                      Height="100"
                      Background="#DC3545"
                      Foreground="White"
                      BorderThickness="0"
                      Margin="20"
                      Command="{Binding DoneCommand}">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="10"/>
                        </Style>
                    </Button.Resources>
                </Button>
            </StackPanel>
        </Grid>

        <!-- Processing Screen -->
        <Grid x:Name="ProcessingScreen" 
              Background="#80000000"
              Visibility="{Binding ProcessingVisible}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="â³" 
                         FontSize="100" 
                         HorizontalAlignment="Center"
                         Margin="0,0,0,30">
                    <TextBlock.RenderTransform>
                        <RotateTransform x:Name="ProcessingRotation" CenterX="50" CenterY="50"/>
                    </TextBlock.RenderTransform>
                    <TextBlock.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="ProcessingRotation"
                                                   Storyboard.TargetProperty="Angle"
                                                   From="0" To="360" Duration="0:0:2"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </TextBlock.Triggers>
                </TextBlock>
                
                <TextBlock Text="Processing Your Photos..." 
                         FontSize="50" 
                         Foreground="White" 
                         HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <!-- Sharing Screen -->
        <Grid x:Name="SharingScreen" 
              Background="Black"
              Visibility="{Binding SharingVisible}">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="Share Your Photo" 
                         FontSize="60" 
                         FontWeight="Bold"
                         Foreground="White" 
                         HorizontalAlignment="Center"
                         Margin="0,0,0,50"/>

                <!-- QR Code -->
                <Border Background="White" 
                       Padding="30" 
                       CornerRadius="10"
                       Margin="0,0,0,30">
                    <Image Source="{Binding QRCodeImage}" 
                          Width="400" 
                          Height="400"/>
                </Border>

                <TextBlock Text="Scan QR Code to Download" 
                         FontSize="40" 
                         Foreground="White" 
                         HorizontalAlignment="Center"
                         Margin="0,0,0,20"/>

                <!-- Email Input -->
                <Border Background="White" 
                       CornerRadius="10"
                       Width="600"
                       Margin="0,30,0,20">
                    <TextBox x:Name="EmailTextBox"
                           FontSize="30"
                           Padding="20"
                           BorderThickness="0"
                           Text="{Binding EmailAddress, UpdateSourceTrigger=PropertyChanged}"/>
                </Border>

                <Button Content="Send to Email" 
                      FontSize="35" 
                      FontWeight="Bold"
                      Width="400" 
                      Height="80"
                      Background="#007ACC"
                      Foreground="White"
                      BorderThickness="0"
                      Command="{Binding SendEmailCommand}">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="10"/>
                        </Style>
                    </Button.Resources>
                </Button>

                <Button Content="Back" 
                      FontSize="30"
                      Width="200" 
                      Height="60"
                      Background="#6C757D"
                      Foreground="White"
                      BorderThickness="0"
                      Margin="0,30,0,0"
                      Command="{Binding BackCommand}">
                    <Button.Resources>
                        <Style TargetType="Border">
                            <Setter Property="CornerRadius" Value="10"/>
                        </Style>
                    </Button.Resources>
                </Button>
            </StackPanel>
        </Grid>

        <!-- Thank You Screen -->
        <Grid x:Name="ThankYouScreen" 
              Visibility="{Binding ThankYouVisible}">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#11998e" Offset="0"/>
                    <GradientStop Color="#38ef7d" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
            
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Text="âœ“" 
                         FontSize="200" 
                         Foreground="White"
                         HorizontalAlignment="Center" 
                         Margin="0,0,0,30"/>
                
                <TextBlock Text="Thank You!" 
                         FontSize="100" 
                         FontWeight="Bold" 
                         Foreground="White" 
                         HorizontalAlignment="Center"
                         Margin="0,0,0,20"/>
                
                <TextBlock Text="Enjoy your photos!" 
                         FontSize="50" 
                         Foreground="White" 
                         HorizontalAlignment="Center"
                         Opacity="0.9"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>
